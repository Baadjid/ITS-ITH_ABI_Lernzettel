<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zustandsdiagramme - Abitur 2026 Informatik TG</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --accent-color: #3b82f6;
            --text-dark: #1e293b;
            --text-light: #64748b;
            --bg-light: #f8fafc;
            --bg-white: #ffffff;
            --border-color: #e2e8f0;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --info-color: #06b6d4;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: linear-gradient(135deg, var(--bg-light) 0%, #e0e7ff 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .breadcrumb {
            background: var(--bg-white);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
        }

        .breadcrumb a {
            color: var(--primary-color);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            background: var(--bg-white);
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-color);
        }

        .header h1 {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        .header .subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            margin-bottom: 1rem;
        }

        .learning-objectives {
            background: linear-gradient(135deg, var(--info-color), #0891b2);
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
        }

        .learning-objectives h3 {
            margin-bottom: 1rem;
        }

        .learning-objectives ul {
            list-style: none;
        }

        .learning-objectives li {
            margin-bottom: 0.5rem;
            padding-left: 1.5rem;
            position: relative;
        }

        .learning-objectives li::before {
            content: "‚úì";
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        .content-section {
            background: var(--bg-white);
            padding: 2rem;
            border-radius: 16px;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .content-section h2 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 0.5rem;
        }

        .content-section h3 {
            color: var(--secondary-color);
            margin: 1.5rem 0 1rem 0;
            font-size: 1.4rem;
        }

        .content-section h4 {
            color: var(--text-dark);
            margin: 1rem 0 0.5rem 0;
            font-size: 1.2rem;
        }

        .definition-box {
            background: linear-gradient(135deg, #e0f2fe, #b3e5fc);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--info-color);
        }

        .definition-box .definition-title {
            font-weight: bold;
            color: var(--secondary-color);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .example-box {
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--success-color);
        }

        .example-box .example-title {
            font-weight: bold;
            color: var(--success-color);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .warning-box {
            background: linear-gradient(135deg, #fefce8, #fef3c7);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--warning-color);
        }

        .warning-box .warning-title {
            font-weight: bold;
            color: var(--warning-color);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .danger-box {
            background: linear-gradient(135deg, #fef2f2, #fecaca);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--danger-color);
        }

        .danger-box .danger-title {
            font-weight: bold;
            color: var(--danger-color);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .diagram-container {
            text-align: center;
            margin: 2rem 0;
            padding: 1.5rem;
            background: var(--bg-light);
            border-radius: 12px;
            border: 2px dashed var(--border-color);
        }

        .state-diagram {
            display: inline-block;
            position: relative;
            margin: 20px;
        }

        .state {
            width: 100px;
            height: 60px;
            border: 2px solid var(--primary-color);
            border-radius: 12px;
            background: var(--bg-white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--primary-color);
            position: relative;
            margin: 20px;
        }

        .state.initial {
            background: linear-gradient(135deg, var(--success-color), #059669);
            color: white;
            border-color: var(--success-color);
        }

        .state.final {
            background: linear-gradient(135deg, var(--danger-color), #dc2626);
            color: white;
            border-color: var(--danger-color);
        }

        .transition {
            position: absolute;
            font-size: 0.9rem;
            background: var(--warning-color);
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            white-space: nowrap;
        }

        .truth-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .truth-table th,
        .truth-table td {
            border: 1px solid var(--border-color);
            padding: 0.8rem;
            text-align: center;
        }

        .truth-table th {
            background: var(--primary-color);
            color: white;
            font-weight: bold;
        }

        .truth-table tr:nth-child(even) {
            background: var(--bg-light);
        }

        .truth-table tr:hover {
            background: #e0f2fe;
        }

        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.4;
            overflow-x: auto;
            margin: 1.5rem 0;
            border: 1px solid #334155;
            position: relative;
        }

        .code-block::before {
            content: "üìã Klicken zum Kopieren";
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 0.8rem;
            color: #94a3b8;
            font-family: 'Segoe UI', sans-serif;
        }

        .code-block .comment {
            color: #94a3b8;
            font-style: italic;
        }

        .code-block .keyword {
            color: #60a5fa;
            font-weight: bold;
        }

        .code-block .string {
            color: #34d399;
        }

        .code-block .number {
            color: #fbbf24;
        }

        .code-block .function {
            color: #a78bfa;
        }

        .code-block .type {
            color: #fb7185;
        }

        .code-title {
            background: var(--primary-color);
            color: white;
            padding: 0.5rem 1rem;
            margin: 1.5rem 0 0 0;
            border-radius: 8px 8px 0 0;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .code-block.with-title {
            margin-top: 0;
            border-radius: 0 0 8px 8px;
        }

        .interactive-section {
            background: linear-gradient(135deg, var(--bg-white), #f1f5f9);
            padding: 2rem;
            border-radius: 16px;
            margin: 2rem 0;
            border: 2px solid var(--primary-color);
        }

        .interactive-section h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .flipflop-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .flipflop-card {
            background: var(--bg-white);
            padding: 1.5rem;
            border-radius: 12px;
            border: 2px solid var(--border-color);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .flipflop-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-color: var(--primary-color);
        }

        .flipflop-card h4 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .timeline {
            position: relative;
            margin: 2rem 0;
            padding-left: 2rem;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--primary-color);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 2rem;
            padding-left: 2rem;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -2rem;
            top: 0.5rem;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--primary-color);
            transform: translateX(-4px);
        }

        .timeline-item h4 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
            padding: 2rem;
            background: var(--bg-white);
            border-radius: 16px;
            border: 1px solid var(--border-color);
        }

        .nav-button {
            display: inline-block;
            padding: 1rem 2rem;
            background: var(--primary-color);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .nav-button.disabled {
            background: var(--text-light);
            cursor: not-allowed;
            transform: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .flipflop-types {
                grid-template-columns: 1fr;
            }

            .navigation {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="breadcrumb">
            <a href="index.html">üè† Abitur 2026 Informatik TG</a> > 
            <a href="#technische-informatik-1">üîß Technische Informatik I</a> > 
            <strong>üìä Zustandsdiagramme</strong>
        </div>

        <header class="header">
            <h1>üìä Zustandsdiagramme</h1>
            <div class="subtitle">Von FlipFlops zu komplexen Automaten</div>
            <div class="learning-objectives">
                <h3>üéØ Lernziele dieser Lektion:</h3>
                <ul>
                    <li>Verstehen, was Zustandsdiagramme sind und wof√ºr sie verwendet werden</li>
                    <li>Den Unterschied zwischen Schaltnetzen und Schaltwerken erkl√§ren k√∂nnen</li>
                    <li>FlipFlops als Grundbausteine von Schaltwerken verstehen</li>
                    <li>Zustandsdiagramme lesen und selbst erstellen k√∂nnen</li>
                    <li>UML-Zustandsdiagramme f√ºr Mikrocontroller-Programmierung verwenden</li>
                    <li>Verschiedene Arten von Transitionen unterscheiden k√∂nnen</li>
                </ul>
            </div>
        </header>

        <div class="content-section">
            <h2>üé¨ Einf√ºhrung: Was sind Zustandsdiagramme?</h2>
            
            <p>Stell dir vor, du m√∂chtest eine automatische Ampelschaltung programmieren oder einen Bahn√ºbergang steuern. Wie w√ºrdest du das machen? Diese Systeme haben verschiedene <strong>Zust√§nde</strong> (z.B. "Rot", "Gelb", "Gr√ºn") und wechseln zwischen diesen Zust√§nden basierend auf bestimmten <strong>Ereignissen</strong> (z.B. Timer abgelaufen, Knopf gedr√ºckt).</p>

            <div class="definition-box">
                <div class="definition-title">üìù Definition: Zustandsdiagramm</div>
                Ein <strong>Zustandsdiagramm</strong> ist eine grafische Darstellung, die zeigt:
                <ul>
                    <li><strong>Zust√§nde</strong> - verschiedene Situationen, in denen sich ein System befinden kann</li>
                    <li><strong>√úberg√§nge (Transitionen)</strong> - Wechsel zwischen den Zust√§nden</li>
                    <li><strong>Ereignisse</strong> - was einen Zustandswechsel ausl√∂st</li>
                    <li><strong>Aktionen</strong> - was beim Zustandswechsel passiert</li>
                </ul>
            </div>

            <div class="example-box">
                <div class="example-title">üí° Alltags-Beispiel: Handy</div>
                Dein Handy hat verschiedene Zust√§nde:
                <ul>
                    <li><strong>Ausgeschaltet</strong> ‚Üí (Ein-Knopf dr√ºcken) ‚Üí <strong>Hochfahren</strong></li>
                    <li><strong>Hochfahren</strong> ‚Üí (Bootvorgang fertig) ‚Üí <strong>Standby</strong></li>
                    <li><strong>Standby</strong> ‚Üí (Display ber√ºhren) ‚Üí <strong>Aktiv</strong></li>
                    <li><strong>Aktiv</strong> ‚Üí (5 Min. keine Eingabe) ‚Üí <strong>Standby</strong></li>
                </ul>
            </div>
        </div>

        <div class="content-section">
            <h2>‚ö° Von Schaltnetzen zu Schaltwerken</h2>
            
            <p>Bevor wir uns Zustandsdiagramme genauer ansehen, m√ºssen wir verstehen, warum wir sie √ºberhaupt brauchen.</p>

            <h3>üîß Schaltnetze (Kombinatorische Logik)</h3>
            <p>Bisher haben wir haupts√§chlich mit <strong>Schaltnetzen</strong> gearbeitet:</p>
            
            <div class="definition-box">
                <div class="definition-title">üìù Schaltnetz</div>
                <ul>
                    <li>Ausg√§nge h√§ngen <strong>nur</strong> von aktuellen Eing√§ngen ab</li>
                    <li><strong>Kein Ged√§chtnis</strong> - keine Speicherung von Zust√§nden</li>
                    <li>Gleiche Eingabe ‚Üí Immer gleiche Ausgabe</li>
                    <li>Beispiele: AND, OR, NOT-Gatter, Multiplexer, Addierer</li>
                </ul>
            </div>

            <h3>‚öôÔ∏è Schaltwerke (Sequenzielle Logik)</h3>
            <p>Viele reale Systeme brauchen aber ein <strong>Ged√§chtnis</strong>:</p>

            <div class="definition-box">
                <div class="definition-title">üìù Schaltwerk</div>
                <ul>
                    <li>Ausg√§nge h√§ngen von Eing√§ngen <strong>UND</strong> vom aktuellen Zustand ab</li>
                    <li><strong>Hat Ged√§chtnis</strong> - kann Zust√§nde speichern</li>
                    <li>Gleiche Eingabe ‚Üí M√∂glicherweise verschiedene Ausgaben</li>
                    <li><strong>Zeit spielt eine Rolle!</strong></li>
                    <li>Beispiele: FlipFlops, Z√§hler, Speicher, Steuerungen</li>
                </ul>
            </div>

            <div class="warning-box">
                <div class="warning-title">‚ö†Ô∏è Wichtiger Unterschied</div>
                <p><strong>Schaltnetze:</strong> "Was kommt rein, kommt sofort entsprechend raus"</p>
                <p><strong>Schaltwerke:</strong> "Was rauskommt, h√§ngt davon ab, was vorher passiert ist"</p>
            </div>
        </div>

        <div class="content-section">
            <h2>üîÑ FlipFlops - Die Grundbausteine</h2>
            
            <p>FlipFlops sind die elementaren Speicherelemente in digitalen Schaltungen. Sie k√∂nnen <strong>1 Bit</strong> speichern.</p>

            <div class="flipflop-types">
                <div class="flipflop-card">
                    <h4>RS-FlipFlop (Set-Reset)</h4>
                    <p><strong>Eing√§nge:</strong> S (Set), R (Reset)</p>
                    <p><strong>Problem:</strong> Verbotener Zustand bei S=1, R=1</p>
                    
                    <table class="truth-table">
                        <thead>
                            <tr>
                                <th>S</th>
                                <th>R</th>
                                <th>Q(n+1)</th>
                                <th>Bedeutung</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>0</td>
                                <td>0</td>
                                <td>Q(n)</td>
                                <td>Speichern</td>
                            </tr>
                            <tr>
                                <td>0</td>
                                <td>1</td>
                                <td>0</td>
                                <td>Reset</td>
                            </tr>
                            <tr>
                                <td>1</td>
                                <td>0</td>
                                <td>1</td>
                                <td>Set</td>
                            </tr>
                            <tr style="background: var(--danger-color); color: white;">
                                <td>1</td>
                                <td>1</td>
                                <td>?</td>
                                <td>Verboten!</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="flipflop-card">
                    <h4>D-FlipFlop (Delay/Data)</h4>
                    <p><strong>Eing√§nge:</strong> D (Data), T (Takt)</p>
                    <p><strong>Vorteil:</strong> Kein verbotener Zustand!</p>
                    
                    <table class="truth-table">
                        <thead>
                            <tr>
                                <th>Takt</th>
                                <th>D</th>
                                <th>Q(n+1)</th>
                                <th>Bedeutung</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>‚Üë</td>
                                <td>0</td>
                                <td>0</td>
                                <td>√úbernehme 0</td>
                            </tr>
                            <tr>
                                <td>‚Üë</td>
                                <td>1</td>
                                <td>1</td>
                                <td>√úbernehme 1</td>
                            </tr>
                            <tr>
                                <td>0/1</td>
                                <td>X</td>
                                <td>Q(n)</td>
                                <td>Speichere</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="flipflop-card">
                    <h4>JK-FlipFlop (Jump-Kill)</h4>
                    <p><strong>Eing√§nge:</strong> J (Jump/Set), K (Kill/Reset)</p>
                    <p><strong>Besonderheit:</strong> Toggle-Funktion bei J=1, K=1</p>
                    
                    <table class="truth-table">
                        <thead>
                            <tr>
                                <th>J</th>
                                <th>K</th>
                                <th>Q(n+1)</th>
                                <th>Bedeutung</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>0</td>
                                <td>0</td>
                                <td>Q(n)</td>
                                <td>Speichern</td>
                            </tr>
                            <tr>
                                <td>0</td>
                                <td>1</td>
                                <td>0</td>
                                <td>Reset</td>
                            </tr>
                            <tr>
                                <td>1</td>
                                <td>0</td>
                                <td>1</td>
                                <td>Set</td>
                            </tr>
                            <tr style="background: var(--success-color); color: white;">
                                <td>1</td>
                                <td>1</td>
                                <td>!Q(n)</td>
                                <td>Toggle</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="warning-box">
                <div class="warning-title">‚ö†Ô∏è Taktsignale sind wichtig!</div>
                <p>Moderne FlipFlops sind <strong>taktgesteuert</strong>:</p>
                <ul>
                    <li><strong>Taktflankengesteuert:</strong> Reagieren nur auf steigende (‚Üë) oder fallende (‚Üì) Flanke</li>
                    <li><strong>Taktzustandsgesteuert:</strong> Reagieren w√§hrend Takt=1 oder Takt=0</li>
                    <li><strong>Warum?</strong> Ohne Takt w√§ren die Reaktionszeiten unvorhersagbar!</li>
                </ul>
            </div>
        </div>

        <div class="content-section">
            <h2>üìä Zustandsdiagramme verstehen</h2>
            
            <h3>üîÑ D-FlipFlop als Zustandsdiagramm</h3>
            <div class="diagram-container">
                <div style="display: flex; justify-content: center; align-items: center; gap: 100px;">
                    <div class="state">Q = 0</div>
                    <div class="state">Q = 1</div>
                </div>
                <div style="margin-top: 20px;">
                    <strong>√úberg√§nge:</strong><br>
                    Q=0 ‚Üí Q=1: bei D=1 und Taktflanke ‚Üë<br>
                    Q=1 ‚Üí Q=0: bei D=0 und Taktflanke ‚Üë
                </div>
            </div>

            <h3>üìê Aufbau von Zustandsdiagrammen</h3>
            
            <div class="definition-box">
                <div class="definition-title">üìù Elemente eines Zustandsdiagramms</div>
                <ul>
                    <li><strong>Zust√§nde:</strong> Kreise oder Rechtecke mit Namen</li>
                    <li><strong>Startzustand:</strong> Markiert mit gef√ºlltem Kreis ‚óè</li>
                    <li><strong>Endzustand:</strong> Doppelter Kreis (bei endlichen Automaten)</li>
                    <li><strong>Transitionen:</strong> Pfeile zwischen Zust√§nden</li>
                    <li><strong>Ereignisse:</strong> Text an den Pfeilen</li>
                    <li><strong>Aktionen:</strong> Was beim √úbergang passiert</li>
                </ul>
            </div>

            <h3>üèóÔ∏è UML-Zustandsdiagramme</h3>
            <p>In der Informatik verwenden wir oft <strong>UML-Zustandsdiagramme</strong> (Unified Modeling Language):</p>

            <div class="example-box">
                <div class="example-title">üí° UML-Notation</div>
                <strong>Zustandsname</strong><br>
                <code>entry/ Aktion beim Betreten</code><br>
                <code>do/ Aktivit√§t im Zustand</code><br>
                <code>exit/ Aktion beim Verlassen</code><br><br>
                
                <strong>√úbergang:</strong><br>
                <code>Ereignis [Bedingung] / Aktion</code>
            </div>
        </div>

        <div class="content-section">
            <h2>üö¶ Praxisbeispiel: Ampelsteuerung</h2>
            
            <p>Lass uns eine einfache Ampelsteuerung als Zustandsdiagramm modellieren:</p>

            <div class="diagram-container">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 50px; align-items: center;">
                    <div>
                        <div class="state initial">Rot</div>
                        <div style="margin-top: 10px; font-size: 0.9rem;">
                            entry/ RotAn=1<br>
                            entry/ GelbAus=0<br>
                            entry/ GruenAus=0
                        </div>
                    </div>
                    <div>
                        <div class="state">RotGelb</div>
                        <div style="margin-top: 10px; font-size: 0.9rem;">
                            entry/ RotAn=1<br>
                            entry/ GelbAn=1<br>
                            entry/ GruenAus=0
                        </div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 50px; margin-top: 30px;">
                    <div>
                        <div class="state">Gruen</div>
                        <div style="margin-top: 10px; font-size: 0.9rem;">
                            entry/ RotAus=0<br>
                            entry/ GelbAus=0<br>
                            entry/ GruenAn=1
                        </div>
                    </div>
                    <div>
                        <div class="state">Gelb</div>
                        <div style="margin-top: 10px; font-size: 0.9rem;">
                            entry/ RotAus=0<br>
                            entry/ GelbAn=1<br>
                            entry/ GruenAus=0
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 30px;">
                    <strong>√úberg√§nge:</strong><br>
                    Rot ‚Üí RotGelb: Timer1 abgelaufen (nach 30s)<br>
                    RotGelb ‚Üí Gruen: Timer2 abgelaufen (nach 3s)<br>
                    Gruen ‚Üí Gelb: Timer3 abgelaufen (nach 25s)<br>
                    Gelb ‚Üí Rot: Timer4 abgelaufen (nach 3s)
                </div>
            </div>

            <div class="code-title">üö¶ C-Code f√ºr Ampelsteuerung</div>
            <div class="code-block with-title">
<span class="comment">// Zustandsdefinitionen f√ºr die Ampel</span>
<span class="keyword">#define</span> <span class="type">ROT</span>     <span class="number">0</span>
<span class="keyword">#define</span> <span class="type">ROTGELB</span> <span class="number">1</span>
<span class="keyword">#define</span> <span class="type">GRUEN</span>   <span class="number">2</span>
<span class="keyword">#define</span> <span class="type">GELB</span>    <span class="number">3</span>

<span class="comment">// Globale Zustandsvariablen</span>
<span class="keyword">int</span> zustand = <span class="type">ROT</span>;
<span class="keyword">int</span> timer = <span class="number">0</span>;

<span class="comment">// Hauptfunktion der Ampelsteuerung</span>
<span class="keyword">void</span> <span class="function">ampelSteuerung</span>() {
    <span class="keyword">switch</span>(zustand) {
        <span class="keyword">case</span> <span class="type">ROT</span>:
            <span class="comment">// Zustand: Rot - warten auf Timer</span>
            <span class="keyword">if</span>(timer >= <span class="number">30</span>) {
                zustand = <span class="type">ROTGELB</span>;
                timer = <span class="number">0</span>;
                <span class="function">Serial.println</span>(<span class="string">"Wechsel: Rot -> RotGelb"</span>);
            }
            <span class="keyword">break</span>;
            
        <span class="keyword">case</span> <span class="type">ROTGELB</span>:
            <span class="comment">// Zustand: Rot+Gelb - Vorbereitung auf Gr√ºn</span>
            <span class="keyword">if</span>(timer >= <span class="number">3</span>) {
                zustand = <span class="type">GRUEN</span>;
                timer = <span class="number">0</span>;
                <span class="function">Serial.println</span>(<span class="string">"Wechsel: RotGelb -> Gruen"</span>);
            }
            <span class="keyword">break</span>;
            
        <span class="keyword">case</span> <span class="type">GRUEN</span>:
            <span class="comment">// Zustand: Gr√ºn - Verkehr kann fahren</span>
            <span class="keyword">if</span>(timer >= <span class="number">25</span>) {
                zustand = <span class="type">GELB</span>;
                timer = <span class="number">0</span>;
                <span class="function">Serial.println</span>(<span class="string">"Wechsel: Gruen -> Gelb"</span>);
            }
            <span class="keyword">break</span>;
            
        <span class="keyword">case</span> <span class="type">GELB</span>:
            <span class="comment">// Zustand: Gelb - Achtung, gleich Rot</span>
            <span class="keyword">if</span>(timer >= <span class="number">3</span>) {
                zustand = <span class="type">ROT</span>;
                timer = <span class="number">0</span>;
                <span class="function">Serial.println</span>(<span class="string">"Wechsel: Gelb -> Rot"</span>);
            }
            <span class="keyword">break</span>;
    }
    timer++;  <span class="comment">// Timer hochz√§hlen</span>
}
            </div>
        </div>

        <div class="content-section">
            <h2>üöß Arduino-Beispiel: LED-Blinker mit Modi</h2>
            
            <p>Hier ist das vollst√§ndige Arduino-Beispiel aus der urspr√ºnglichen Datei, strukturiert und gut lesbar formatiert:</p>

            <div class="code-title">üí° Arduino LED-Blinker: Vollst√§ndiges Beispiel</div>
            <div class="code-block with-title">
<span class="comment">// ==========================================</span>
<span class="comment">// Arduino-Code: LED-Blinker mit verschiedenen Modi</span>
<span class="comment">// Demonstriert Zustandsautomaten in der Praxis</span>
<span class="comment">// ==========================================</span>

<span class="comment">// 1. ZUSTANDSDEFINITIONEN</span>
<span class="comment">// ------------------------</span>
<span class="keyword">enum</span> led_zustaende {
    <span class="type">AUS</span>,                <span class="comment">// LED ist komplett aus</span>
    <span class="type">LANGSAM_BLINKEN</span>,    <span class="comment">// LED blinkt alle 500ms</span>
    <span class="type">SCHNELL_BLINKEN</span>,    <span class="comment">// LED blinkt alle 100ms</span>
    <span class="type">DAUERLICHT</span>          <span class="comment">// LED ist permanent an</span>
};

<span class="comment">// 2. PIN-DEFINITIONEN</span>
<span class="comment">// -------------------</span>
<span class="keyword">#define</span> <span class="type">LED_PIN</span>     <span class="number">13</span>    <span class="comment">// Interne LED des Arduino</span>
<span class="keyword">#define</span> <span class="type">BUTTON_PIN</span>  <span class="number">2</span>     <span class="comment">// Taster f√ºr Zustandswechsel</span>

<span class="comment">// 3. TIMING-KONSTANTEN (in Millisekunden)</span>
<span class="comment">// ----------------------------------------</span>
<span class="keyword">#define</span> <span class="type">LANGSAM_INTERVALL</span>  <span class="number">500</span>   <span class="comment">// 0,5 Sekunden</span>
<span class="keyword">#define</span> <span class="type">SCHNELL_INTERVALL</span>  <span class="number">100</span>   <span class="comment">// 0,1 Sekunden</span>
<span class="keyword">#define</span> <span class="type">ENTPRELL_ZEIT</span>      <span class="number">50</span>    <span class="comment">// Button-Entprellung</span>

<span class="comment">// 4. GLOBALE VARIABLEN</span>
<span class="comment">// --------------------</span>
led_zustaende aktueller_zustand = <span class="type">AUS</span>;  <span class="comment">// Startzustand</span>

<span class="comment">// Timing-Variablen f√ºr nicht-blockierenden Code</span>
<span class="keyword">unsigned long</span> letzter_blink_zeitpunkt = <span class="number">0</span>;
<span class="keyword">unsigned long</span> letzter_button_zeitpunkt = <span class="number">0</span>;

<span class="comment">// Status-Variablen</span>
<span class="keyword">bool</span> led_ist_an = <span class="keyword">false</span>;
<span class="keyword">bool</span> letzter_button_zustand = <span class="keyword">HIGH</span>;      <span class="comment">// INPUT_PULLUP: HIGH = nicht gedr√ºckt</span>
<span class="keyword">bool</span> button_wurde_gedrueckt = <span class="keyword">false</span>;

<span class="comment">// ==========================================</span>
<span class="comment">// SETUP-FUNKTION (wird einmal beim Start ausgef√ºhrt)</span>
<span class="comment">// ==========================================</span>
<span class="keyword">void</span> <span class="function">setup</span>() {
    <span class="comment">// Pin-Konfiguration</span>
    <span class="function">pinMode</span>(<span class="type">LED_PIN</span>, <span class="type">OUTPUT</span>);          <span class="comment">// LED als Ausgang</span>
    <span class="function">pinMode</span>(<span class="type">BUTTON_PIN</span>, <span class="type">INPUT_PULLUP</span>);  <span class="comment">// Button mit internem Pull-up</span>
    
    <span class="comment">// LED initial ausschalten</span>
    <span class="function">digitalWrite</span>(<span class="type">LED_PIN</span>, <span class="keyword">LOW</span>);
    led_ist_an = <span class="keyword">false</span>;
    
    <span class="comment">// Serielle Kommunikation f√ºr Debug-Ausgaben</span>
    <span class="function">Serial.begin</span>(<span class="number">9600</span>);
    <span class="function">Serial.println</span>(<span class="string">"üî¥ LED-Blinker gestartet"</span>);
    <span class="function">Serial.println</span>(<span class="string">"üìã Taster dr√ºcken um zwischen Modi zu wechseln:"</span>);
    <span class="function">Serial.println</span>(<span class="string">"   AUS -> LANGSAM -> SCHNELL -> DAUERLICHT -> AUS"</span>);
    <span class="function">Serial.println</span>(<span class="string">"==========================================\\n"</span>);
}

<span class="comment">// ==========================================</span>
<span class="comment">// MAIN LOOP (wird kontinuierlich ausgef√ºhrt)</span>
<span class="comment">// ==========================================</span>
<span class="keyword">void</span> <span class="function">loop</span>() {
    <span class="comment">// 1. Button-Eingaben verarbeiten (mit Entprellung)</span>
    <span class="function">verarbeite_button_input</span>();
    
    <span class="comment">// 2. Hauptsteuerung des Zustandsautomaten</span>
    <span class="function">led_zustandsautomat</span>();
    
    <span class="comment">// 3. Kurze Pause f√ºr Systemstabilit√§t</span>
    <span class="function">delay</span>(<span class="number">10</span>);  <span class="comment">// 10ms Zykluszeit</span>
}
            </div>

            <div class="code-title">üîò Button-Eingabe mit Entprellung</div>
            <div class="code-block with-title">
<span class="comment">// ==========================================</span>
<span class="comment">// BUTTON-VERARBEITUNG MIT ENTPRELLUNG</span>
<span class="comment">// ==========================================</span>
<span class="keyword">void</span> <span class="function">verarbeite_button_input</span>() {
    <span class="keyword">unsigned long</span> aktuelle_zeit = <span class="function">millis</span>();
    <span class="keyword">bool</span> aktueller_button_zustand = <span class="function">digitalRead</span>(<span class="type">BUTTON_PIN</span>);
    
    <span class="comment">// Entprellung: nur reagieren wenn genug Zeit vergangen ist</span>
    <span class="keyword">if</span>(aktuelle_zeit - letzter_button_zeitpunkt > <span class="type">ENTPRELL_ZEIT</span>) {
        
        <span class="comment">// Fallende Flanke erkennen (Button wurde gedr√ºckt)</span>
        <span class="comment">// INPUT_PULLUP: HIGH = nicht gedr√ºckt, LOW = gedr√ºckt</span>
        <span class="keyword">if</span>(letzter_button_zustand == <span class="keyword">HIGH</span> && aktueller_button_zustand == <span class="keyword">LOW</span>) {
            button_wurde_gedrueckt = <span class="keyword">true</span>;
            letzter_button_zeitpunkt = aktuelle_zeit;
            
            <span class="comment">// Debug-Ausgabe</span>
            <span class="function">Serial.println</span>(<span class="string">"üîò Button gedr√ºckt!"</span>);
        }
        
        <span class="comment">// Aktuellen Zustand f√ºr n√§chsten Vergleich speichern</span>
        letzter_button_zustand = aktueller_button_zustand;
    }
}
            </div>

            <div class="code-title">ü§ñ Hauptsteuerung: Der Zustandsautomat</div>
            <div class="code-block with-title">
<span class="comment">// ==========================================</span>
<span class="comment">// HAUPTSTEUERUNG: ZUSTANDSAUTOMAT</span>
<span class="comment">// ==========================================</span>
<span class="keyword">void</span> <span class="function">led_zustandsautomat</span>() {
    <span class="keyword">unsigned long</span> aktuelle_zeit = <span class="function">millis</span>();
    
    <span class="keyword">switch</span>(aktueller_zustand) {
        
        <span class="comment">// ----------------</span>
        <span class="comment">// ZUSTAND: AUS</span>
        <span class="comment">// ----------------</span>
        <span class="keyword">case</span> <span class="type">AUS</span>:
            <span class="comment">// Entry-Aktion: LED ausschalten (nur beim ersten Mal)</span>
            <span class="keyword">if</span>(led_ist_an) {
                <span class="function">digitalWrite</span>(<span class="type">LED_PIN</span>, <span class="keyword">LOW</span>);
                led_ist_an = <span class="keyword">false</span>;
                <span class="function">Serial.println</span>(<span class="string">"üî¥ Zustand: AUS - LED ausgeschaltet"</span>);
            }
            
            <span class="comment">// √úbergangs-Bedingung pr√ºfen</span>
            <span class="keyword">if</span>(button_wurde_gedrueckt) {
                aktueller_zustand = <span class="type">LANGSAM_BLINKEN</span>;
                letzter_blink_zeitpunkt = aktuelle_zeit;  <span class="comment">// Timer zur√ºcksetzen</span>
                button_wurde_gedrueckt = <span class="keyword">false</span>;       <span class="comment">// Event verbraucht</span>
                <span class="function">Serial.println</span>(<span class="string">"‚û°Ô∏è  Wechsel zu: LANGSAM BLINKEN"</span>);
            }
            <span class="keyword">break</span>;
            
        <span class="comment">// ----------------</span>
        <span class="comment">// ZUSTAND: LANGSAM BLINKEN</span>
        <span class="comment">// ----------------</span>
        <span class="keyword">case</span> <span class="type">LANGSAM_BLINKEN</span>:
            <span class="comment">// Do-Aktivit√§t: Langsam blinken (alle 500ms)</span>
            <span class="keyword">if</span>(aktuelle_zeit - letzter_blink_zeitpunkt >= <span class="type">LANGSAM_INTERVALL</span>) {
                <span class="comment">// LED-Zustand umschalten (Toggle)</span>
                led_ist_an = !led_ist_an;
                <span class="function">digitalWrite</span>(<span class="type">LED_PIN</span>, led_ist_an ? <span class="keyword">HIGH</span> : <span class="keyword">LOW</span>);
                letzter_blink_zeitpunkt = aktuelle_zeit;
                
                <span class="comment">// Debug-Ausgabe</span>
                <span class="function">Serial.print</span>(<span class="string">"üü° Langsam blinken: LED "</span>);
                <span class="function">Serial.println</span>(led_ist_an ? <span class="string">"AN"</span> : <span class="string">"AUS"</span>);
            }
            
            <span class="comment">// √úbergangs-Bedingung pr√ºfen</span>
            <span class="keyword">if</span>(button_wurde_gedrueckt) {
                aktueller_zustand = <span class="type">SCHNELL_BLINKEN</span>;
                letzter_blink_zeitpunkt = aktuelle_zeit;
                button_wurde_gedrueckt = <span class="keyword">false</span>;
                <span class="function">Serial.println</span>(<span class="string">"‚û°Ô∏è  Wechsel zu: SCHNELL BLINKEN"</span>);
            }
            <span class="keyword">break</span>;
            
        <span class="comment">// ----------------</span>
        <span class="comment">// ZUSTAND: SCHNELL BLINKEN</span>
        <span class="comment">// ----------------</span>
        <span class="keyword">case</span> <span class="type">SCHNELL_BLINKEN</span>:
            <span class="comment">// Do-Aktivit√§t: Schnell blinken (alle 100ms)</span>
            <span class="keyword">if</span>(aktuelle_zeit - letzter_blink_zeitpunkt >= <span class="type">SCHNELL_INTERVALL</span>) {
                <span class="comment">// LED-Zustand umschalten</span>
                led_ist_an = !led_ist_an;
                <span class="function">digitalWrite</span>(<span class="type">LED_PIN</span>, led_ist_an ? <span class="keyword">HIGH</span> : <span class="keyword">LOW</span>);
                letzter_blink_zeitpunkt = aktuelle_zeit;
                
                <span class="comment">// Debug-Ausgabe (weniger h√§ufig, um Serial Monitor nicht zu √ºberlasten)</span>
                <span class="keyword">static int</span> blink_counter = <span class="number">0</span>;
                <span class="keyword">if</span>(++blink_counter % <span class="number">10</span> == <span class="number">0</span>) {  <span class="comment">// Nur jeden 10. Blink ausgeben</span>
                    <span class="function">Serial.print</span>(<span class="string">"üî¥ Schnell blinken: LED "</span>);
                    <span class="function">Serial.println</span>(led_ist_an ? <span class="string">"AN"</span> : <span class="string">"AUS"</span>);
                }
            }
            
            <span class="comment">// √úbergangs-Bedingung pr√ºfen</span>
            <span class="keyword">if</span>(button_wurde_gedrueckt) {
                aktueller_zustand = <span class="type">DAUERLICHT</span>;
                button_wurde_gedrueckt = <span class="keyword">false</span>;
                <span class="function">Serial.println</span>(<span class="string">"‚û°Ô∏è  Wechsel zu: DAUERLICHT"</span>);
            }
            <span class="keyword">break</span>;
            
        <span class="comment">// ----------------</span>
        <span class="comment">// ZUSTAND: DAUERLICHT</span>
        <span class="comment">// ----------------</span>
        <span class="keyword">case</span> <span class="type">DAUERLICHT</span>:
            <span class="comment">// Entry-Aktion: LED permanent einschalten</span>
            <span class="keyword">if</span>(!led_ist_an) {
                <span class="function">digitalWrite</span>(<span class="type">LED_PIN</span>, <span class="keyword">HIGH</span>);
                led_ist_an = <span class="keyword">true</span>;
                <span class="function">Serial.println</span>(<span class="string">"üü¢ Zustand: DAUERLICHT - LED permanent an"</span>);
            }
            
            <span class="comment">// √úbergangs-Bedingung: Zur√ºck zum Anfang (Zyklus schlie√üen)</span>
            <span class="keyword">if</span>(button_wurde_gedrueckt) {
                aktueller_zustand = <span class="type">AUS</span>;
                button_wurde_gedrueckt = <span class="keyword">false</span>;
                <span class="function">Serial.println</span>(<span class="string">"‚û°Ô∏è  Wechsel zu: AUS (Zyklus beendet)"</span>);
                <span class="function">Serial.println</span>(<span class="string">"==========================================\\n"</span>);
            }
            <span class="keyword">break</span>;
            
        <span class="comment">// ----------------</span>
        <span class="comment">// FEHLERBEHANDLUNG</span>
        <span class="comment">// ----------------</span>
        <span class="keyword">default</span>:
            <span class="comment">// Unbekannter Zustand - zur√ºck zum sicheren Zustand</span>
            <span class="function">Serial.println</span>(<span class="string">"‚ùå FEHLER: Unbekannter Zustand! Zur√ºck zu AUS"</span>);
            aktueller_zustand = <span class="type">AUS</span>;
            <span class="function">digitalWrite</span>(<span class="type">LED_PIN</span>, <span class="keyword">LOW</span>);
            led_ist_an = <span class="keyword">false</span>;
            <span class="keyword">break</span>;
    }
}
            </div>

            <div class="code-title">üîç Hilfsfunktion f√ºr Debug-Ausgaben</div>
            <div class="code-block with-title">
<span class="comment">// ==========================================</span>
<span class="comment">// HILFSFUNKTION: STATUS-AUSGABE</span>
<span class="comment">// ==========================================</span>
<span class="keyword">void</span> <span class="function">gib_aktuellen_status_aus</span>() {
    <span class="function">Serial.print</span>(<span class="string">"üìä Aktueller Zustand: "</span>);
    
    <span class="keyword">switch</span>(aktueller_zustand) {
        <span class="keyword">case</span> <span class="type">AUS</span>:            
            <span class="function">Serial.println</span>(<span class="string">"AUS"</span>); 
            <span class="keyword">break</span>;
        <span class="keyword">case</span> <span class="type">LANGSAM_BLINKEN</span>: 
            <span class="function">Serial.println</span>(<span class="string">"LANGSAM_BLINKEN"</span>); 
            <span class="keyword">break</span>;
        <span class="keyword">case</span> <span class="type">SCHNELL_BLINKEN</span>: 
            <span class="function">Serial.println</span>(<span class="string">"SCHNELL_BLINKEN"</span>); 
            <span class="keyword">break</span>;
        <span class="keyword">case</span> <span class="type">DAUERLICHT</span>:     
            <span class="function">Serial.println</span>(<span class="string">"DAUERLICHT"</span>); 
            <span class="keyword">break</span>;
    }
    
    <span class="function">Serial.print</span>(<span class="string">"üí° LED Status: "</span>);
    <span class="function">Serial.println</span>(led_ist_an ? <span class="string">"AN"</span> : <span class="string">"AUS"</span>);
    <span class="function">Serial.println</span>(<span class="string">"------------------------------------------"</span>);
}

<span class="comment">// Optional: Funktion aufrufen wenn gew√ºnscht</span>
<span class="comment">// gib_aktuellen_status_aus(); // Kann in loop() eingef√ºgt werden</span>
            </div>
        </div>

        <div class="content-section">
            <h2>üöß Komplexeres Beispiel: Bahn√ºbergang</h2>
            
            <p>Schauen wir uns ein realistischeres Beispiel an - einen automatisierten Bahn√ºbergang mit Lichtschranken:</p>

            <div class="example-box">
                <div class="example-title">üí° System-Beschreibung</div>
                <strong>Komponenten:</strong>
                <ul>
                    <li>2 Lichtschranken (vor und nach dem √úbergang)</li>
                    <li>Schranke (heben/senken)</li>
                    <li>Ampel (rot/gr√ºn)</li>
                </ul>
                <strong>Ablauf:</strong>
                <ol>
                    <li>Zug n√§hert sich ‚Üí Lichtschranke 1 ausgel√∂st</li>
                    <li>Ampel auf Rot, Schranke senken</li>
                    <li>Zug f√§hrt √ºber √úbergang</li>
                    <li>Zug verl√§sst Bereich ‚Üí Lichtschranke 2 nicht mehr blockiert</li>
                    <li>Schranke heben, Ampel auf Gr√ºn</li>
                </ol>
            </div>

            <div class="timeline">
                <div class="timeline-item">
                    <h4>Zustand: Offen</h4>
                    <p><strong>Verhalten:</strong> Schranke oben, Ampel gr√ºn</p>
                    <p><strong>√úbergang:</strong> Lichtschranke1 aktiviert ‚Üí Schlie√üen1</p>
                </div>
                <div class="timeline-item">
                    <h4>Zustand: Schlie√üen1</h4>
                    <p><strong>Verhalten:</strong> Schranke senken, Ampel rot</p>
                    <p><strong>√úbergang:</strong> Schranke unten ‚Üí Zu1</p>
                </div>
                <div class="timeline-item">
                    <h4>Zustand: Zu1</h4>
                    <p><strong>Verhalten:</strong> Warten auf Zug</p>
                    <p><strong>√úbergang:</strong> Lichtschranke2 inaktiv ‚Üí √ñffnen1</p>
                </div>
                <div class="timeline-item">
                    <h4>Zustand: √ñffnen1</h4>
                    <p><strong>Verhalten:</strong> Schranke heben</p>
                    <p><strong>√úbergang:</strong> Schranke oben ‚Üí Offen</p>
                </div>
            </div>

            <div class="code-title">üöÇ Arduino-Code f√ºr Bahn√ºbergang-Steuerung</div>
            <div class="code-block with-title">
<span class="comment">// ==========================================</span>
<span class="comment">// BAHN√úBERGANG-STEUERUNG</span>
<span class="comment">// Komplexes Beispiel f√ºr Zustandsautomaten</span>
<span class="comment">// ==========================================</span>

<span class="comment">// Zustandsdefinitionen</span>
<span class="keyword">#define</span> <span class="type">INITIALISIERUNG</span>  <span class="number">0</span>
<span class="keyword">#define</span> <span class="type">OFFEN</span>           <span class="number">1</span>
<span class="keyword">#define</span> <span class="type">SCHLIESSEN1</span>     <span class="number">2</span>
<span class="keyword">#define</span> <span class="type">ZU1</span>             <span class="number">3</span>
<span class="keyword">#define</span> <span class="type">OEFFNEN1</span>        <span class="number">4</span>

<span class="comment">// Pin-Definitionen</span>
<span class="keyword">#define</span> <span class="type">LICHTSCHRANKE1_PIN</span>  <span class="number">2</span>   <span class="comment">// Zug-Erkennung Anfahrt</span>
<span class="keyword">#define</span> <span class="type">LICHTSCHRANKE2_PIN</span>  <span class="number">3</span>   <span class="comment">// Zug-Erkennung Abfahrt</span>
<span class="keyword">#define</span> <span class="type">SCHRANKE_OBEN_PIN</span>   <span class="number">4</span>   <span class="comment">// Endschalter: Schranke oben</span>
<span class="keyword">#define</span> <span class="type">SCHRANKE_UNTEN_PIN</span>  <span class="number">5</span>   <span class="comment">// Endschalter: Schranke unten</span>
<span class="keyword">#define</span> <span class="type">AMPEL_ROT_PIN</span>       <span class="number">6</span>   <span class="comment">// Rote Ampel</span>
<span class="keyword">#define</span> <span class="type">AMPEL_GRUEN_PIN</span>     <span class="number">7</span>   <span class="comment">// Gr√ºne Ampel</span>
<span class="keyword">#define</span> <span class="type">SCHRANKE_HEBEN_PIN</span>  <span class="number">8</span>   <span class="comment">// Motor: Schranke heben</span>
<span class="keyword">#define</span> <span class="type">SCHRANKE_SENKEN_PIN</span> <span class="number">9</span>   <span class="comment">// Motor: Schranke senken</span>

<span class="comment">// Globale Zustandsvariable</span>
<span class="keyword">int</span> aktueller_zustand = <span class="type">INITIALISIERUNG</span>;

<span class="comment">// Sensorwerte (werden kontinuierlich aktualisiert)</span>
<span class="keyword">bool</span> lichtschranke1_aktiv = <span class="keyword">false</span>;
<span class="keyword">bool</span> lichtschranke2_aktiv = <span class="keyword">false</span>;
<span class="keyword">bool</span> schranke_ist_oben = <span class="keyword">true</span>;
<span class="keyword">bool</span> schranke_ist_unten = <span class="keyword">false</span>;

<span class="comment">// ==========================================</span>
<span class="comment">// SETUP-FUNKTION</span>
<span class="comment">// ==========================================</span>
<span class="keyword">void</span> <span class="function">setup</span>() {
    <span class="comment">// Eing√§nge konfigurieren (Sensoren)</span>
    <span class="function">pinMode</span>(<span class="type">LICHTSCHRANKE1_PIN</span>, <span class="type">INPUT_PULLUP</span>);
    <span class="function">pinMode</span>(<span class="type">LICHTSCHRANKE2_PIN</span>, <span class="type">INPUT_PULLUP</span>);
    <span class="function">pinMode</span>(<span class="type">SCHRANKE_OBEN_PIN</span>, <span class="type">INPUT_PULLUP</span>);
    <span class="function">pinMode</span>(<span class="type">SCHRANKE_UNTEN_PIN</span>, <span class="type">INPUT_PULLUP</span>);
    
    <span class="comment">// Ausg√§nge konfigurieren (Aktoren)</span>
    <span class="function">pinMode</span>(<span class="type">AMPEL_ROT_PIN</span>, <span class="type">OUTPUT</span>);
    <span class="function">pinMode</span>(<span class="type">AMPEL_GRUEN_PIN</span>, <span class="type">OUTPUT</span>);
    <span class="function">pinMode</span>(<span class="type">SCHRANKE_HEBEN_PIN</span>, <span class="type">OUTPUT</span>);
    <span class="function">pinMode</span>(<span class="type">SCHRANKE_SENKEN_PIN</span>, <span class="type">OUTPUT</span>);
    
    <span class="comment">// Initialer sicherer Zustand</span>
    <span class="function">digitalWrite</span>(<span class="type">AMPEL_GRUEN_PIN</span>, <span class="keyword">HIGH</span>);    <span class="comment">// Ampel auf Gr√ºn</span>
    <span class="function">digitalWrite</span>(<span class="type">AMPEL_ROT_PIN</span>, <span class="keyword">LOW</span>);      <span class="comment">// Rot aus</span>
    <span class="function">digitalWrite</span>(<span class="type">SCHRANKE_HEBEN_PIN</span>, <span class="keyword">LOW</span>);   <span class="comment">// Motoren aus</span>
    <span class="function">digitalWrite</span>(<span class="type">SCHRANKE_SENKEN_PIN</span>, <span class="keyword">LOW</span>);
    
    <span class="comment">// Serielle Kommunikation</span>
    <span class="function">Serial.begin</span>(<span class="number">9600</span>);
    <span class="function">Serial.println</span>(<span class="string">"üöÇ Bahn√ºbergang-Steuerung gestartet"</span>);
    <span class="function">Serial.println</span>(<span class="string">"üîß System wird initialisiert..."</span>);
}

<span class="comment">// ==========================================</span>
<span class="comment">// MAIN LOOP</span>
<span class="comment">// ==========================================</span>
<span class="keyword">void</span> <span class="function">loop</span>() {
    <span class="comment">// 1. Alle Sensoren einlesen</span>
    <span class="function">lese_sensoren</span>();
    
    <span class="comment">// 2. Hauptsteuerung ausf√ºhren</span>
    <span class="function">bahnuebergang_steuerung</span>();
    
    <span class="comment">// 3. Debug-Ausgabe (nicht zu h√§ufig)</span>
    <span class="function">debug_ausgabe</span>();
    
    <span class="comment">// 4. Zykluszeit</span>
    <span class="function">delay</span>(<span class="number">100</span>);  <span class="comment">// 100ms Zykluszeit</span>
}

<span class="comment">// ==========================================</span>
<span class="comment">// SENSOREN EINLESEN</span>
<span class="comment">// ==========================================</span>
<span class="keyword">void</span> <span class="function">lese_sensoren</span>() {
    <span class="comment">// Lichtschranken (LOW = blockiert, HIGH = frei)</span>
    lichtschranke1_aktiv = (<span class="function">digitalRead</span>(<span class="type">LICHTSCHRANKE1_PIN</span>) == <span class="keyword">LOW</span>);
    lichtschranke2_aktiv = (<span class="function">digitalRead</span>(<span class="type">LICHTSCHRANKE2_PIN</span>) == <span class="keyword">LOW</span>);
    
    <span class="comment">// Schranken-Endschalter (LOW = aktiviert)</span>
    schranke_ist_oben = (<span class="function">digitalRead</span>(<span class="type">SCHRANKE_OBEN_PIN</span>) == <span class="keyword">LOW</span>);
    schranke_ist_unten = (<span class="function">digitalRead</span>(<span class="type">SCHRANKE_UNTEN_PIN</span>) == <span class="keyword">LOW</span>);
}
            </div>

            <div class="code-title">üö¶ Hauptsteuerung des Bahn√ºbergangs</div>
            <div class="code-block with-title">
<span class="comment">// ==========================================</span>
<span class="comment">// HAUPTSTEUERUNG: BAHN√úBERGANG-AUTOMAT</span>
<span class="comment">// ==========================================</span>
<span class="keyword">void</span> <span class="function">bahnuebergang_steuerung</span>() {
    <span class="keyword">switch</span>(aktueller_zustand) {
        
        <span class="comment">// ----------------</span>
        <span class="comment">// ZUSTAND: INITIALISIERUNG</span>
        <span class="comment">// ----------------</span>
        <span class="keyword">case</span> <span class="type">INITIALISIERUNG</span>:
            <span class="function">Serial.println</span>(<span class="string">"üîß Zustand: INITIALISIERUNG"</span>);
            
            <span class="comment">// Sichere Grundstellung herstellen</span>
            <span class="function">digitalWrite</span>(<span class="type">AMPEL_GRUEN_PIN</span>, <span class="keyword">HIGH</span>);     <span class="comment">// Ampel auf Gr√ºn</span>
            <span class="function">digitalWrite</span>(<span class="type">AMPEL_ROT_PIN</span>, <span class="keyword">LOW</span>);       <span class="comment">// Rot aus</span>
            <span class="function">digitalWrite</span>(<span class="type">SCHRANKE_HEBEN_PIN</span>, <span class="keyword">HIGH</span>);   <span class="comment">// Schranke nach oben</span>
            <span class="function">digitalWrite</span>(<span class="type">SCHRANKE_SENKEN_PIN</span>, <span class="keyword">LOW</span>);
            
            <span class="comment">// √úbergang zu OFFEN wenn Schranke oben ist</span>
            <span class="keyword">if</span>(schranke_ist_oben) {
                aktueller_zustand = <span class="type">OFFEN</span>;
                <span class="function">digitalWrite</span>(<span class="type">SCHRANKE_HEBEN_PIN</span>, <span class="keyword">LOW</span>);  <span class="comment">// Motor ausschalten</span>
                <span class="function">Serial.println</span>(<span class="string">"‚úÖ Initialisierung abgeschlossen"</span>);
            }
            <span class="keyword">break</span>;
            
        <span class="comment">// ----------------</span>
        <span class="comment">// ZUSTAND: OFFEN (Normalbetrieb)</span>
        <span class="comment">// ----------------</span>
        <span class="keyword">case</span> <span class="type">OFFEN</span>:
            <span class="comment">// Entry-Aktionen (Zustand beibehalten)</span>
            <span class="function">digitalWrite</span>(<span class="type">AMPEL_GRUEN_PIN</span>, <span class="keyword">HIGH</span>);    <span class="comment">// Gr√ºn an</span>
            <span class="function">digitalWrite</span>(<span class="type">AMPEL_ROT_PIN</span>, <span class="keyword">LOW</span>);      <span class="comment">// Rot aus</span>
            <span class="function">digitalWrite</span>(<span class="type">SCHRANKE_HEBEN_PIN</span>, <span class="keyword">LOW</span>);   <span class="comment">// Motoren aus</span>
            <span class="function">digitalWrite</span>(<span class="type">SCHRANKE_SENKEN_PIN</span>, <span class="keyword">LOW</span>);
            
            <span class="comment">// √úbergang: Zug n√§hert sich</span>
            <span class="keyword">if</span>(lichtschranke1_aktiv) {
                <span class="function">Serial.println</span>(<span class="string">"üö® ZUG ERKANNT! Schlie√üe Bahn√ºbergang"</span>);
                aktueller_zustand = <span class="type">SCHLIESSEN1</span>;
            }
            <span class="keyword">break</span>;
            
        <span class="comment">// ----------------</span>
        <span class="comment">// ZUSTAND: SCHLIESSEN (Bahn√ºbergang sperren)</span>
        <span class="comment">// ----------------</span>
        <span class="keyword">case</span> <span class="type">SCHLIESSEN1</span>:
            <span class="function">Serial.println</span>(<span class="string">"üî¥ Zustand: SCHLIESSEN - Bahn√ºbergang wird gesperrt"</span>);
            
            <span class="comment">// Entry-Aktionen</span>
            <span class="function">digitalWrite</span>(<span class="type">AMPEL_ROT_PIN</span>, <span class="keyword">HIGH</span>);      <span class="comment">// Ampel auf Rot</span>
            <span class="function">digitalWrite</span>(<span class="type">AMPEL_GRUEN_PIN</span>, <span class="keyword">LOW</span>);     <span class="comment">// Gr√ºn aus</span>
            <span class="function">digitalWrite</span>(<span class="type">SCHRANKE_SENKEN_PIN</span>, <span class="keyword">HIGH</span>);  <span class="comment">// Schranke senken</span>
            <span class="function">digitalWrite</span>(<span class="type">SCHRANKE_HEBEN_PIN</span>, <span class="keyword">LOW</span>);
            
            <span class="comment">// √úbergang: Schranke ist unten</span>
            <span class="keyword">if</span>(schranke_ist_unten) {
                <span class="function">Serial.println</span>(<span class="string">"‚¨áÔ∏è  Schranke geschlossen - warte auf Zug"</span>);
                aktueller_zustand = <span class="type">ZU1</span>;
                <span class="function">digitalWrite</span>(<span class="type">SCHRANKE_SENKEN_PIN</span>, <span class="keyword">LOW</span>);  <span class="comment">// Motor ausschalten</span>
            }
            <span class="keyword">break</span>;
            
        <span class="comment">// ----------------</span>
        <span class="comment">// ZUSTAND: ZU (Warten auf Zugdurchfahrt)</span>
        <span class="comment">// ----------------</span>
        <span class="keyword">case</span> <span class="type">ZU1</span>:
            <span class="comment">// Zustand halten - keine besonderen Aktionen</span>
            <span class="function">digitalWrite</span>(<span class="type">AMPEL_ROT_PIN</span>, <span class="keyword">HIGH</span>);      <span class="comment">// Rot bleibt an</span>
            <span class="function">digitalWrite</span>(<span class="type">AMPEL_GRUEN_PIN</span>, <span class="keyword">LOW</span>);      <span class="comment">// Gr√ºn bleibt aus</span>
            <span class="function">digitalWrite</span>(<span class="type">SCHRANKE_HEBEN_PIN</span>, <span class="keyword">LOW</span>);    <span class="comment">// Motoren aus</span>
            <span class="function">digitalWrite</span>(<span class="type">SCHRANKE_SENKEN_PIN</span>, <span class="keyword">LOW</span>);
            
            <span class="comment">// √úbergang: Zug hat Bereich komplett verlassen</span>
            <span class="comment">// (beide Lichtschranken m√ºssen frei sein)</span>
            <span class="keyword">if</span>(!lichtschranke2_aktiv && !lichtschranke1_aktiv) {
                <span class="function">Serial.println</span>(<span class="string">"üöÇ Zug ist durch - √∂ffne Bahn√ºbergang"</span>);
                aktueller_zustand = <span class="type">OEFFNEN1</span>;
            }
            <span class="keyword">break</span>;
            
        <span class="comment">// ----------------</span>
        <span class="comment">// ZUSTAND: √ñFFNEN (Bahn√ºbergang freigeben)</span>
        <span class="comment">// ----------------</span>
        <span class="keyword">case</span> <span class="type">OEFFNEN1</span>:
            <span class="function">Serial.println</span>(<span class="string">"üü¢ Zustand: √ñFFNEN - Bahn√ºbergang wird freigegeben"</span>);
            
            <span class="comment">// Schranke heben (Ampel bleibt noch rot f√ºr Sicherheit)</span>
            <span class="function">digitalWrite</span>(<span class="type">SCHRANKE_HEBEN_PIN</span>, <span class="keyword">HIGH</span>);
            <span class="function">digitalWrite</span>(<span class="type">SCHRANKE_SENKEN_PIN</span>, <span class="keyword">LOW</span>);
            
            <span class="comment">// √úbergang: Schranke ist oben</span>
            <span class="keyword">if</span>(schranke_ist_oben) {
                <span class="function">Serial.println</span>(<span class="string">"‚¨ÜÔ∏è  Bahn√ºbergang wieder frei - Normalbetrieb"</span>);
                aktueller_zustand = <span class="type">OFFEN</span>;
                <span class="function">digitalWrite</span>(<span class="type">SCHRANKE_HEBEN_PIN</span>, <span class="keyword">LOW</span>);  <span class="comment">// Motor ausschalten</span>
            }
            <span class="keyword">break</span>;
            
        <span class="comment">// ----------------</span>
        <span class="comment">// FEHLERBEHANDLUNG</span>
        <span class="comment">// ----------------</span>
        <span class="keyword">default</span>:
            <span class="comment">// Unbekannter Zustand - Sicherheitszustand</span>
            <span class="function">Serial.println</span>(<span class="string">"‚ùå FEHLER: Unbekannter Zustand - gehe zu INITIALISIERUNG"</span>);
            aktueller_zustand = <span class="type">INITIALISIERUNG</span>;
            <span class="keyword">break</span>;
    }
}

<span class="comment">// ==========================================</span>
<span class="comment">// DEBUG-AUSGABE (nicht zu h√§ufig)</span>
<span class="comment">// ==========================================</span>
<span class="keyword">void</span> <span class="function">debug_ausgabe</span>() {
    <span class="comment">// Debug-Informationen alle 2 Sekunden</span>
    <span class="keyword">static unsigned long</span> letzte_ausgabe = <span class="number">0</span>;
    <span class="keyword">if</span>(<span class="function">millis</span>() - letzte_ausgabe > <span class="number">2000</span>) {
        <span class="function">Serial.print</span>(<span class="string">"üìä Sensoren - LS1: "</span>);
        <span class="function">Serial.print</span>(lichtschranke1_aktiv ? <span class="string">"üî¥AKTIV"</span> : <span class="string">"üü¢frei"</span>);
        <span class="function">Serial.print</span>(<span class="string">", LS2: "</span>);
        <span class="function">Serial.print</span>(lichtschranke2_aktiv ? <span class="string">"üî¥AKTIV"</span> : <span class="string">"üü¢frei"</span>);
        <span class="function">Serial.print</span>(<span class="string">", Schranke: "</span>);
        
        <span class="keyword">if</span>(schranke_ist_oben) 
            <span class="function">Serial.print</span>(<span class="string">"‚¨ÜÔ∏èOBEN"</span>);
        <span class="keyword">else if</span>(schranke_ist_unten) 
            <span class="function">Serial.print</span>(<span class="string">"‚¨áÔ∏èUNTEN"</span>);
        <span class="keyword">else</span> 
            <span class="function">Serial.print</span>(<span class="string">"üîÑbewegt sich"</span>);
            
        <span class="function">Serial.println</span>();
        letzte_ausgabe = <span class="function">millis</span>();
    }
}
            </div>
        </div>

        <div class="content-section">
            <h2>‚ö° Arten von Transitionen</h2>
            
            <p>Es gibt verschiedene Arten von √úberg√§ngen in Zustandsdiagrammen:</p>

            <div class="flipflop-types">
                <div class="flipflop-card">
                    <h4>üéØ Einfache Transition</h4>
                    <p><strong>Format:</strong> <code>Ereignis</code></p>
                    <p><strong>Beispiel:</strong> <code>TasteGedr√ºckt</code></p>
                    <p>Der √úbergang erfolgt, sobald das Ereignis eintritt.</p>
                </div>

                <div class="flipflop-card">
                    <h4>üîí Transition mit W√§chterbedingung</h4>
                    <p><strong>Format:</strong> <code>[Bedingung]</code></p>
                    <p><strong>Beispiel:</strong> <code>[Temperatur > 50¬∞C]</code></p>
                    <p>Der √úbergang erfolgt nur, wenn die Bedingung erf√ºllt ist.</p>
                </div>

                <div class="flipflop-card">
                    <h4>‚ö° Transition mit Ereignis und Bedingung</h4>
                    <p><strong>Format:</strong> <code>Ereignis [Bedingung]</code></p>
                    <p><strong>Beispiel:</strong> <code>Timer [Z√§hler >= 10]</code></p>
                    <p>Sowohl Ereignis als auch Bedingung m√ºssen erf√ºllt sein.</p>
                </div>

                <div class="flipflop-card">
                    <h4>üîÑ Selbsttransition</h4>
                    <p><strong>Format:</strong> Pfeil vom Zustand zu sich selbst</p>
                    <p><strong>Beispiel:</strong> <code>Blinken [counter++]</code></p>
                    <p>Zustand bleibt gleich, aber Aktion wird ausgef√ºhrt.</p>
                </div>

                <div class="flipflop-card">
                    <h4>‚öôÔ∏è Transition mit Aktion</h4>
                    <p><strong>Format:</strong> <code>Ereignis / Aktion</code></p>
                    <p><strong>Beispiel:</strong> <code>Start / Motor_Ein()</code></p>
                    <p>Beim √úbergang wird zus√§tzlich eine Aktion ausgef√ºhrt.</p>
                </div>

                <div class="flipflop-card">
                    <h4>üéÆ Komplette Transition</h4>
                    <p><strong>Format:</strong> <code>Ereignis [Bedingung] / Aktion</code></p>
                    <p><strong>Beispiel:</strong> <code>ButtonPress [batteryOK] / startSystem()</code></p>
                    <p>Alle Elemente kombiniert f√ºr maximale Kontrolle.</p>
                </div>
            </div>
        </div>

        <div class="content-section">
            <h2>üéØ Mikrocontroller-Programmierung</h2>
            
            <p>In der Praxis verwenden wir Zustandsdiagramme oft f√ºr die Mikrocontroller-Programmierung:</p>

            <h3>üìù Implementierungsschritte</h3>
            <div class="timeline">
                <div class="timeline-item">
                    <h4>1. Zust√§nde definieren</h4>
                    <p>Mit <code>#define</code> oder <code>enum</code> alle Zust√§nde benennen</p>
                </div>
                <div class="timeline-item">
                    <h4>2. Zustandsvariable erstellen</h4>
                    <p>Variable, die den aktuellen Zustand speichert</p>
                </div>
                <div class="timeline-item">
                    <h4>3. Switch-Case-Struktur</h4>
                    <p>F√ºr jeden Zustand einen <code>case</code></p>
                </div>
                <div class="timeline-item">
                    <h4>4. √úbergangsbedingungen pr√ºfen</h4>
                    <p>In jedem <code>case</code> die Bedingungen f√ºr √úberg√§nge testen</p>
                </div>
                <div class="timeline-item">
                    <h4>5. Aktionen ausf√ºhren</h4>
                    <p>Entry-, Do- und Exit-Aktionen implementieren</p>
                </div>
            </div>

            <div class="code-title">üéÆ Template f√ºr Zustandsautomaten</div>
            <div class="code-block with-title">
<span class="comment">// ==========================================</span>
<span class="comment">// TEMPLATE F√úR ZUSTANDSAUTOMATEN</span>
<span class="comment">// ==========================================</span>

<span class="comment">// 1. Zust√§nde definieren</span>
<span class="keyword">enum</span> SystemZustaende {
    <span class="type">ZUSTAND_1</span>,
    <span class="type">ZUSTAND_2</span>,
    <span class="type">ZUSTAND_3</span>,
    <span class="comment">// ... weitere Zust√§nde</span>
} aktueller_zustand = <span class="type">ZUSTAND_1</span>;  <span class="comment">// Startzustand</span>

<span class="comment">// 2. Variablen f√ºr Zustandslogik</span>
<span class="keyword">bool</span> ereignis_aufgetreten = <span class="keyword">false</span>;
<span class="keyword">int</span> zaehler = <span class="number">0</span>;
<span class="keyword">unsigned long</span> letzter_zeitpunkt = <span class="number">0</span>;

<span class="comment">// 3. Hauptsteuerung</span>
<span class="keyword">void</span> <span class="function">zustandsautomat</span>() {
    <span class="keyword">switch</span>(aktueller_zustand) {
        
        <span class="keyword">case</span> <span class="type">ZUSTAND_1</span>:
            <span class="comment">// Entry-Aktionen (einmalig beim Betreten)</span>
            <span class="keyword">static bool</span> entry_ausgefuehrt = <span class="keyword">false</span>;
            <span class="keyword">if</span>(!entry_ausgefuehrt) {
                <span class="comment">// Entry-Code hier</span>
                entry_ausgefuehrt = <span class="keyword">true</span>;
            }
            
            <span class="comment">// Do-Aktivit√§ten (kontinuierlich im Zustand)</span>
            <span class="comment">// Regelm√§√üige Aktionen hier</span>
            
            <span class="comment">// √úbergangsbedingungen pr√ºfen</span>
            <span class="keyword">if</span>(ereignis_aufgetreten) {
                <span class="comment">// Exit-Aktionen</span>
                entry_ausgefuehrt = <span class="keyword">false</span>;  <span class="comment">// F√ºr n√§chsten Entry</span>
                
                <span class="comment">// Zustandswechsel</span>
                aktueller_zustand = <span class="type">ZUSTAND_2</span>;
                ereignis_aufgetreten = <span class="keyword">false</span>;  <span class="comment">// Event verbrauchen</span>
            }
            <span class="keyword">break</span>;
            
        <span class="keyword">case</span> <span class="type">ZUSTAND_2</span>:
            <span class="comment">// Analog zu ZUSTAND_1...</span>
            <span class="keyword">break</span>;
            
        <span class="keyword">default</span>:
            <span class="comment">// Fehlerbehandlung</span>
            aktueller_zustand = <span class="type">ZUSTAND_1</span>;  <span class="comment">// Sicherer Zustand</span>
            <span class="keyword">break</span>;
    }
}
            </div>
        </div>

        <div class="interactive-section">
            <h3>üß† √úbungen zum Selbsttest</h3>
            
            <div class="example-box">
                <div class="example-title">üìù √úbung 1: Zustandsdiagramm lesen</div>
                <p><strong>Gegeben:</strong> Ein Getr√§nkeautomat mit den Zust√§nden "Bereit", "M√ºnze eingeworfen", "Auswahl getroffen", "Ausgabe"</p>
                <p><strong>Aufgabe:</strong> Beschreibe die m√∂glichen √úberg√§nge und notiere dir, welche Ereignisse diese ausl√∂sen k√∂nnten.</p>
            </div>

            <div class="example-box">
                <div class="example-title">üìù √úbung 2: FlipFlop-Verhalten</div>
                <p><strong>Gegeben:</strong> Ein JK-FlipFlop mit J=1, K=1 (Toggle-Modus)</p>
                <p><strong>Aufgabe:</strong> Zeichne das Zustandsdiagramm und erkl√§re, was bei jeder Taktflanke passiert.</p>
            </div>

            <div class="example-box">
                <div class="example-title">üìù √úbung 3: Code-Implementierung</div>
                <p><strong>Aufgabe:</strong> Implementiere eine einfache Waschmaschinen-Steuerung mit den Zust√§nden:</p>
                <ul>
                    <li>Bereit ‚Üí (Start) ‚Üí Waschen</li>
                    <li>Waschen ‚Üí (Timer) ‚Üí Sp√ºlen</li>
                    <li>Sp√ºlen ‚Üí (Timer) ‚Üí Schleudern</li>
                    <li>Schleudern ‚Üí (Timer) ‚Üí Fertig</li>
                    <li>Fertig ‚Üí (T√ºr √∂ffnen) ‚Üí Bereit</li>
                </ul>
            </div>

            <div class="example-box">
                <div class="example-title">üìù √úbung 4: Erweiterte Ampelsteuerung</div>
                <p><strong>Aufgabe:</strong> Erweitere die Ampelsteuerung um eine Fu√üg√§ngerampel mit Anforderungstaster:</p>
                <ul>
                    <li>Normale Ampelschaltung l√§uft</li>
                    <li>Fu√üg√§nger dr√ºckt Taster</li>
                    <li>Nach aktueller Gr√ºnphase: verl√§ngerte Rotphase f√ºr Fu√üg√§nger</li>
                    <li>Fu√üg√§ngerampel wird gr√ºn</li>
                    <li>Dann wieder normale Schaltung</li>
                </ul>
            </div>
        </div>

        <div class="content-section">
            <h2>üí° Tipps f√ºr die Praxis</h2>

            <div class="warning-box">
                <div class="warning-title">‚ö†Ô∏è H√§ufige Fehler vermeiden</div>
                <ul>
                    <li><strong>Vergessene Zust√§nde:</strong> Alle m√∂glichen Systemzust√§nde ber√ºcksichtigen</li>
                    <li><strong>Unvollst√§ndige √úberg√§nge:</strong> F√ºr jeden Zustand alle m√∂glichen Ereignisse behandeln</li>
                    <li><strong>Race Conditions:</strong> Bei mehreren Ereignissen gleichzeitig Priorit√§ten festlegen</li>
                    <li><strong>Endlos-Schleifen:</strong> Immer Ausstiegsm√∂glichkeiten vorsehen</li>
                    <li><strong>Blockierender Code:</strong> Verwende <code>millis()</code> statt <code>delay()</code> f√ºr Timer</li>
                    <li><strong>Fehlende Entprellung:</strong> Buttons und Sensoren k√∂nnen "prellen"</li>
                </ul>
            </div>

            <div class="example-box">
                <div class="example-title">‚úÖ Best Practices</div>
                <ul>
                    <li><strong>Sprechende Namen:</strong> Zust√§nde und Ereignisse verst√§ndlich benennen</li>
                    <li><strong>Modularer Aufbau:</strong> Komplexe Systeme in Teilautomaten aufteilen</li>
                    <li><strong>Dokumentation:</strong> Zustandsdiagramm als Kommentar in den Code einbinden</li>
                    <li><strong>Testen:</strong> Alle m√∂glichen Zustands√ºberg√§nge systematisch testen</li>
                    <li><strong>Reset-Zustand:</strong> Immer einen definierten Startzustand haben</li>
                    <li><strong>Fehlerbehandlung:</strong> Default-Case f√ºr unbekannte Zust√§nde</li>
                    <li><strong>Debug-Ausgaben:</strong> Zustandswechsel protokollieren</li>
                </ul>
            </div>

            <div class="warning-box">
                <div class="warning-title">üêõ Debugging von Zustandsautomaten</div>
                <p><strong>Typische Probleme und L√∂sungen:</strong></p>
                <ul>
                    <li><strong>System "h√§ngt" in einem Zustand:</strong> Pr√ºfe √úbergangsbedingungen</li>
                    <li><strong>Unerwartete Zustandswechsel:</strong> Events werden mehrfach ausgel√∂st</li>
                    <li><strong>Timing-Probleme:</strong> millis() Overflow nach 49 Tagen beachten</li>
                    <li><strong>Speicher-Probleme:</strong> Statische Variablen sparsam verwenden</li>
                </ul>
            </div>
        </div>

        <div class="content-section">
            <h2>üéì Erweiterte Konzepte</h2>
            
            <h3>üîÑ Hierarchische Zustandsautomaten</h3>
            <p>Bei komplexen Systemen k√∂nnen Zustandsautomaten verschachtelt werden:</p>
            
            <div class="definition-box">
                <div class="definition-title">üìù Beispiel: Waschmaschine mit Unterzust√§nden</div>
                <strong>Hauptzustand "Waschen" hat Unterzust√§nde:</strong>
                <ul>
                    <li>Waschen ‚Üí Einweichen (2 Min)</li>
                    <li>Waschen ‚Üí Hauptw√§sche (15 Min)</li>
                    <li>Waschen ‚Üí Nachsp√ºlen (3 Min)</li>
                </ul>
                <p>Erst wenn alle Unterzust√§nde durchlaufen sind, wechselt der Hauptzustand zu "Sp√ºlen".</p>
            </div>

            <h3>üîÑ Parallele Zustandsautomaten</h3>
            <p>Verschiedene Teilsysteme k√∂nnen unabh√§ngig voneinander laufen:</p>
            
            <div class="example-box">
                <div class="example-title">üí° Beispiel: Smart Home System</div>
                <ul>
                    <li><strong>Automat 1:</strong> Beleuchtungssteuerung (Tag/Nacht/Gedimmt)</li>
                    <li><strong>Automat 2:</strong> Heizungssteuerung (Heizen/Standby/Aus)</li>
                    <li><strong>Automat 3:</strong> Sicherheitssystem (Scharf/Unscharf/Alarm)</li>
                </ul>
                <p>Alle drei laufen parallel und beeinflussen sich nur bei bestimmten Ereignissen.</p>
            </div>

            <h3>‚è∞ Zeit-basierte Automaten</h3>
            <div class="code-title">‚è±Ô∏è Timer-basierte Zustands√ºberg√§nge</div>
            <div class="code-block with-title">
<span class="comment">// Beispiel: Automatische Beleuchtung mit Zeitsteuerung</span>
<span class="keyword">enum</span> BeleuchtungZustand {
    <span class="type">AUS</span>, <span class="type">DAEMMERUNG</span>, <span class="type">NACHT</span>, <span class="type">MORGEN</span>
};

<span class="keyword">void</span> <span class="function">beleuchtung_automat</span>() {
    <span class="keyword">int</span> stunde = <span class="function">aktuelle_stunde</span>();  <span class="comment">// Von RTC oder NTP</span>
    
    <span class="keyword">switch</span>(beleuchtung_zustand) {
        <span class="keyword">case</span> <span class="type">AUS</span>:
            <span class="keyword">if</span>(stunde >= <span class="number">18</span>) {  <span class="comment">// 18:00 Uhr</span>
                beleuchtung_zustand = <span class="type">DAEMMERUNG</span>;
                <span class="function">setze_helligkeit</span>(<span class="number">30</span>);  <span class="comment">// 30% Helligkeit</span>
            }
            <span class="keyword">break</span>;
            
        <span class="keyword">case</span> <span class="type">DAEMMERUNG</span>:
            <span class="keyword">if</span>(stunde >= <span class="number">22</span>) {  <span class="comment">// 22:00 Uhr</span>
                beleuchtung_zustand = <span class="type">NACHT</span>;
                <span class="function">setze_helligkeit</span>(<span class="number">10</span>);  <span class="comment">// 10% Helligkeit</span>
            }
            <span class="keyword">break</span>;
            
        <span class="keyword">case</span> <span class="type">NACHT</span>:
            <span class="keyword">if</span>(stunde >= <span class="number">6</span>) {   <span class="comment">// 06:00 Uhr</span>
                beleuchtung_zustand = <span class="type">MORGEN</span>;
                <span class="function">setze_helligkeit</span>(<span class="number">80</span>);  <span class="comment">// 80% Helligkeit</span>
            }
            <span class="keyword">break</span>;
            
        <span class="keyword">case</span> <span class="type">MORGEN</span>:
            <span class="keyword">if</span>(stunde >= <span class="number">8</span>) {   <span class="comment">// 08:00 Uhr</span>
                beleuchtung_zustand = <span class="type">AUS</span>;
                <span class="function">setze_helligkeit</span>(<span class="number">0</span>);   <span class="comment">// Aus</span>
            }
            <span class="keyword">break</span>;
    }
}
            </div>
        </div>

        <div class="content-section">
            <h2>üîó Zusammenfassung</h2>
            
            <p>Zustandsdiagramme sind ein m√§chtiges Werkzeug zur Beschreibung und Implementierung komplexer Systeme:</p>

            <div class="definition-box">
                <div class="definition-title">üéØ Das Wichtigste in K√ºrze</div>
                <ul>
                    <li><strong>Schaltwerke</strong> haben im Gegensatz zu Schaltnetzen ein Ged√§chtnis</li>
                    <li><strong>FlipFlops</strong> sind die Grundbausteine f√ºr Speicher in digitalen Systemen</li>
                    <li><strong>Zustandsdiagramme</strong> visualisieren das Verhalten von Systemen √ºber die Zeit</li>
                    <li><strong>UML-Notation</strong> bietet eine standardisierte Darstellungsform</li>
                    <li><strong>Implementierung</strong> erfolgt typischerweise mit Switch-Case-Strukturen</li>
                    <li><strong>Praktische Anwendung</strong> in Steuerungen, Protokollen und Benutzeroberfl√§chen</li>
                </ul>
            </div>

            <div class="example-box">
                <div class="example-title">üéì Pr√ºfungsrelevant f√ºr das Abitur 2026</div>
                <p>F√ºr das Abitur solltest du k√∂nnen:</p>
                <ul>
                    <li>‚úÖ <strong>Zustandsdiagramme lesen und interpretieren</strong></li>
                    <li>‚úÖ <strong>Einfache Zustandsdiagramme selbst erstellen</strong></li>
                    <li>‚úÖ <strong>FlipFlop-Verhalten in Zustandsdiagrammen darstellen</strong></li>
                    <li>‚úÖ <strong>Code-Implementierung von Zustandsautomaten verstehen</strong></li>
                    <li>‚úÖ <strong>Unterschiede zwischen verschiedenen Transitionsarten erkl√§ren</strong></li>
                    <li>‚úÖ <strong>Praktische Anwendungen in der Mikrocontroller-Programmierung</strong></li>
                    <li>‚úÖ <strong>Debugging und Fehlerbehandlung bei Automaten</strong></li>
                </ul>
            </div>

            <div class="warning-box">
                <div class="warning-title">üìö Weiterf√ºhrende Themen</div>
                <p>Nach dem Abitur k√∂nntest du dich mit folgenden Themen besch√§ftigen:</p>
                <ul>
                    <li><strong>Petri-Netze</strong> - F√ºr parallele und verteilte Systeme</li>
                    <li><strong>Automatentheorie</strong> - Mathematische Grundlagen</li>
                    <li><strong>Model Checking</strong> - Formale Verifikation von Systemen</li>
                    <li><strong>SCXML</strong> - XML-basierte Zustandsautomaten</li>
                    <li><strong>Reactive Programming</strong> - Ereignisgesteuerte Programmierung</li>
                </ul>
            </div>
        </div>

        <div class="content-section">
            <h2>üéÆ Interaktive Lernhilfen</h2>
            
            <div class="example-box">
                <div class="example-title">üîç Selbst-Check: Verstehe ich es wirklich?</div>
                <p><strong>Teste dich selbst mit diesen Fragen:</strong></p>
                <ol>
                    <li>Erkl√§re den Unterschied zwischen Schaltnetzen und Schaltwerken in eigenen Worten</li>
                    <li>Warum ist die R√ºckkopplung bei FlipFlops so wichtig?</li>
                    <li>Wie w√ºrdest du ein Ampelsystem mit Fu√üg√§nger√ºbergang modellieren?</li>
                    <li>Was passiert, wenn du in einem Arduino-Code <code>delay()</code> in einem Zustand verwendest?</li>
                    <li>Wie kann man Race Conditions bei mehreren gleichzeitigen Ereignissen vermeiden?</li>
                </ol>
            </div>

            <div class="warning-box">
                <div class="warning-title">üéØ Abitur-Tipps</div>
                <ul>
                    <li><strong>Zeichne sauber:</strong> Klare, beschriftete Zustandsdiagramme</li>
                    <li><strong>Vollst√§ndigkeit:</strong> Alle m√∂glichen √úberg√§nge bedenken</li>
                    <li><strong>Konsistenz:</strong> Einheitliche Notation verwenden</li>
                    <li><strong>Realit√§tsbezug:</strong> Beispiele aus dem Alltag helfen beim Verst√§ndnis</li>
                    <li><strong>Code-Verst√§ndnis:</strong> Switch-Case-Struktur beherrschen</li>
                    <li><strong>Fehlerbehandlung:</strong> Immer an Default-F√§lle denken</li>
                </ul>
            </div>
        </div>

        <div class="navigation">
            <a href="index.html" class="nav-button">‚Üêüè† √úbersicht</a>
        </div>
    </div>

    <script>
        // Interaktive Funktionen f√ºr besseres Lernerlebnis
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üéì Zustandsdiagramme - Interaktives Lernsystem geladen');
            
            // 1. Navigation mit Hinweisen
            document.querySelectorAll('.nav-button').forEach(button => {
                button.addEventListener('click', function(e) {
                    if (!this.href.includes('index.html')) {
                        e.preventDefault();
                        showNotification('üìö Diese Seite wird noch erstellt! Freue dich auf weitere spannende Themen!', 'info');
                    }
                });
            });

            // 2. Hover-Effekte f√ºr Zustandsdiagramme
            document.querySelectorAll('.state').forEach(state => {
                state.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.05)';
                    this.style.transition = 'transform 0.2s ease';
                    this.style.cursor = 'pointer';
                });
                
                state.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });

                state.addEventListener('click', function() {
                    const stateName = this.textContent;
                    showNotification(`üîÑ Zustand "${stateName}" ausgew√§hlt! In echten Systemen w√ºrde hier die entsprechende Logik ausgef√ºhrt.`, 'success');
                });
            });

            // 3. FlipFlop-Karten Interaktivit√§t
            document.querySelectorAll('.flipflop-card').forEach(card => {
                card.addEventListener('click', function() {
                    const title = this.querySelector('h4').textContent;
                    const info = {
                        'RS-FlipFlop (Set-Reset)': 'Das RS-FlipFlop ist das einfachste Speicherelement. Achtung vor dem verbotenen Zustand S=1, R=1!',
                        'D-FlipFlop (Delay/Data)': 'Das D-FlipFlop ist sehr praktisch: Der Ausgang Q folgt dem Eingang D bei jedem Taktsignal.',
                        'JK-FlipFlop (Jump-Kill)': 'Das JK-FlipFlop ist das vielseitigste: Es kann Set, Reset und Toggle (Umschalten)!'
                    };
                    showNotification(`üí° ${title}: ${info[title] || 'Ein wichtiger Baustein f√ºr Schaltwerke!'}`, 'info');
                });
            });

            // 4. Code-Block Funktionalit√§t
            document.querySelectorAll('.code-block').forEach((block, index) => {
                // Kopier-Funktionalit√§t simulieren
                block.addEventListener('click', function() {
                    const codeTitle = this.previousElementSibling?.textContent || 'Code-Beispiel';
                    showNotification(`üìã ${codeTitle} - Analysiere die Struktur des Zustandsautomaten!`, 'success');
                    
                    // Kurzes Highlight-Effekt
                    this.style.boxShadow = '0 0 20px rgba(37, 99, 235, 0.5)';
                    setTimeout(() => {
                        this.style.boxShadow = '';
                    }, 1000);
                });

                // Code-Syntax hervorheben beim Hovern
                block.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                    this.style.transition = 'transform 0.2s ease';
                });

                block.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });

            // 5. Lernfortschritt verfolgen
            let sectionsRead = new Set();
            const totalSections = document.querySelectorAll('.content-section').length;
            
            const progressObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const sectionTitle = entry.target.querySelector('h2')?.textContent || 'Abschnitt';
                        sectionsRead.add(sectionTitle);
                        
                        const progress = Math.round((sectionsRead.size / totalSections) * 100);
                        
                        // Meilensteine
                        if (progress === 25) {
                            showNotification('üéâ 25% geschafft! Du machst gute Fortschritte mit den Zustandsdiagrammen!', 'success');
                        } else if (progress === 50) {
                            showNotification('üî• Halbzeit! FlipFlops und Automaten werden immer klarer!', 'success');
                        } else if (progress === 75) {
                            showNotification('üöÄ 75% durch! Du bist fast ein Experte f√ºr Zustandsautomaten!', 'success');
                        } else if (progress === 100) {
                            showNotification('üéì Gl√ºckwunsch! Du hast alle Abschnitte zu Zustandsdiagrammen durchgearbeitet!', 'success');
                        }
                        
                        // Fortschritt in Konsole
                        console.log(`üìä Lernfortschritt: ${progress}% (${sectionsRead.size}/${totalSections} Abschnitte)`);
                    }
                });
            }, { threshold: 0.6 });

            document.querySelectorAll('.content-section').forEach(section => {
                progressObserver.observe(section);
            });

            // 6. √úbungsaufgaben interaktiv
            document.querySelectorAll('.example-box').forEach(box => {
                if (box.querySelector('.example-title').textContent.includes('√úbung')) {
                    box.style.cursor = 'pointer';
                    box.addEventListener('click', function() {
                        const exerciseTitle = this.querySelector('.example-title').textContent;
                        showNotification(`üß† ${exerciseTitle}: Nimm dir Zeit zum Nachdenken! Skizziere deine L√∂sung auf Papier.`, 'info');
                    });
                }
            });

            // 7. Truth Table Interaktivit√§t
            document.querySelectorAll('.truth-table tr').forEach(row => {
                if (!row.querySelector('th')) { // Nicht Header-Zeilen
                    row.addEventListener('click', function() {
                        const cells = Array.from(this.querySelectorAll('td')).map(cell => cell.textContent);
                        if (cells.length >= 4) {
                            showNotification(`üîç Zeile analysiert: Bei Eingabe "${cells[0]}, ${cells[1]}" wird Ausgang "${cells[2]}" (${cells[3]})`, 'info');
                        }
                    });
                    
                    row.style.cursor = 'pointer';
                }
            });

            // 8. Tipps und Tricks einblenden
            const tipButton = document.createElement('div');
            tipButton.innerHTML = 'üí° Tipp';
            tipButton.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: var(--primary-color);
                color: white;
                padding: 10px 20px;
                border-radius: 25px;
                cursor: pointer;
                font-weight: bold;
                z-index: 1000;
                box-shadow: 0 4px 8px rgba(0,0,0,0.2);
                transition: all 0.3s ease;
            `;
            
            const tips = [
                "üí° Tipp: Zeichne Zustandsdiagramme immer von links nach rechts!",
                "üîÑ Tipp: Jeder Zustand sollte mindestens einen Ausgang haben!",
                "‚ö†Ô∏è Tipp: Vergiss nie den Default-Case in Switch-Statements!",
                "üéØ Tipp: Verwende millis() statt delay() f√ºr nicht-blockierenden Code!",
                "üîç Tipp: Debug-Ausgaben helfen beim Verstehen der Zustandswechsel!",
                "üìù Tipp: Sprechende Zustandsnamen machen Code lesbarer!",
                "üö´ Tipp: Vermeide zu viele Zust√§nde - teile komplexe Automaten auf!"
            ];
            
            let currentTip = 0;
            tipButton.addEventListener('click', function() {
                showNotification(tips[currentTip], 'info');
                currentTip = (currentTip + 1) % tips.length;
            });
            
            document.body.appendChild(tipButton);

            // Hilfsfunktion f√ºr Notifications
            function showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                const colors = {
                    info: 'var(--info-color)',
                    success: 'var(--success-color)',
                    warning: 'var(--warning-color)',
                    error: 'var(--danger-color)'
                };
                
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: ${colors[type]};
                    color: white;
                    padding: 1rem 1.5rem;
                    border-radius: 8px;
                    z-index: 2000;
                    max-width: 400px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                    font-weight: 500;
                    animation: slideIn 0.3s ease;
                `;
                
                notification.textContent = message;
                document.body.appendChild(notification);
                
                // CSS Animation hinzuf√ºgen
                if (!document.getElementById('notification-styles')) {
                    const style = document.createElement('style');
                    style.id = 'notification-styles';
                    style.textContent = `
                        @keyframes slideIn {
                            from { transform: translateX(100%); opacity: 0; }
                            to { transform: translateX(0); opacity: 1; }
                        }
                        @keyframes slideOut {
                            from { transform: translateX(0); opacity: 1; }
                            to { transform: translateX(100%); opacity: 0; }
                        }
                    `;
                    document.head.appendChild(style);
                }
                
                // Nach 4 Sekunden entfernen
                setTimeout(() => {
                    notification.style.animation = 'slideOut 0.3s ease';
                    setTimeout(() => {
                        if (document.body.contains(notification)) {
                            document.body.removeChild(notification);
                        }
                    }, 300);
                }, 4000);
            }

            // Willkommensnachricht
            setTimeout(() => {
                showNotification('üéì Willkommen zu den Zustandsdiagrammen! Klicke auf Elemente f√ºr mehr Informationen.', 'success');
            }, 1000);
        });
    </script>
</body>
</html>